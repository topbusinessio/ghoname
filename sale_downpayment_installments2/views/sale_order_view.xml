<odoo>
    <record id="view_order_form_inherit_installments" model="ir.ui.view">
        <field name="name">sale.order.form.installments.inherit</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">

            <xpath expr="//sheet" position="inside">

                <!-- Hidden helper fields -->
                <field name="payment_type" invisible="1"/>
                <field name="show_installment_section" invisible="1"/>

                <!-- Down Payment Section -->
                <group invisible="not show_installment_section">
                    <separator string="Down Payment"/>
                    <field name="down_payment_required"/>
                    <field name="down_payment_paid_now"/>
                    <field name="next_down_payment_amount" readonly="1"/>
                    <field name="down_payment_due_date"/>
                    <field name="is_down_payment_complete"/>

                    <div class="oe_button_box" name="button_box">
                        <button name="action_register_down_payment"
                                string="Register Down Payment"
                                type="object"
                                class="btn btn-primary"
                                style="width: 200px;"/>
                    </div>
                </group>

                <!-- Installment Plan Section -->
                <group invisible="not show_installment_section">
                    <separator string="Installment Plan"/>
                    <field name="installment_start_date"/>
                    <field name="first_installment_amount"/>
                    <field name="installment_months"/>
                    <field name="installment_breakdown" readonly="1"/>

                    <div class="oe_button_box" name="button_box">
                        <button name="action_generate_installments"
                                string="Generate Installments"
                                type="object"
                                class="btn btn-success"
                                style="width: 200px;"/>
                    </div>

                    <field name="installment_ids">
                        <tree editable="bottom">
                            <field name="installment_number" readonly="1"/>
                            <field name="amount"/>
                            <field name="due_date"/>
                            <field name="paid"/>
                        </tree>
                    </field>
                </group>

            </xpath>
        </field>
    </record>
</odoo>
